(this["webpackJsonpsocial-media"]=this["webpackJsonpsocial-media"]||[]).push([[0],{135:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(22),c=t.n(i),o=(t(97),t(16)),s=t(24),l=t(9),u=t(25),m=t.n(u),p=t(37),d=t(79),g=t(80),f=t(58),h=t.n(f),b=(t(99),t(100),{apiKey:"AIzaSyBXswiLJEoviZBuYIpTnIUGxVrNP5h9YIU",authDomain:"social-media-57e75.firebaseapp.com",databaseURL:"https://social-media-57e75.firebaseio.com",projectId:"social-media-57e75",storageBucket:"social-media-57e75.appspot.com",messagingSenderId:"297462533566"}),v=new(function(){function e(){Object(d.a)(this,e),h.a.initializeApp(b),this.auth=h.a.auth(),this.db=h.a.firestore()}return Object(g.a)(e,[{key:"getTime",value:function(){return this.db.FieldValue.ServerTimestamp()}},{key:"login",value:function(e,a){return this.auth.signInWithEmailAndPassword(e,a)}},{key:"logout",value:function(){return this.auth.signOut()}},{key:"register",value:function(){var e=Object(p.a)(m.a.mark((function e(a,t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.createUserWithEmailAndPassword(t,n);case 2:return e.abrupt("return",this.auth.currentUser.updateProfile({displayName:a}));case 3:case"end":return e.stop()}}),e,this)})));return function(a,t,n){return e.apply(this,arguments)}}()},{key:"isInitialized",value:function(){var e=this;return new Promise((function(a){e.auth.onAuthStateChanged(a)}))}},{key:"getCurrentUserName",value:function(){return this.auth.currentUser&&this.auth.currentUser.displayName}},{key:"getData",value:function(){return this.db.collection("messages")}}]),e}()),E=t(162),y=t(159),j=t(166),O=t(165),N=t(163),w=t(155),k=t(157),C=t(158),S=Object(n.forwardRef)((function(e,a){var t=e.userName,n=e.message,i=t===n.userName;return r.a.createElement("div",{ref:a,className:"message ".concat(i&&"messageUser")},r.a.createElement(w.a,{className:"message ".concat(i?"messageUserCard":"messageGuestCard")},r.a.createElement(k.a,null,r.a.createElement(C.a,{color:"white",variant:"h5",component:"h2"},!i&&"".concat(n.userName,":"),n.message))))})),x=t(84),W=t.n(x),I=t(85),U=function(e){if(!v.getCurrentUserName())return alert("plase login"),null;var a=Object(n.useState)(""),t=Object(o.a)(a,2),i=t[0],c=t[1],s=Object(n.useState)([]),l=Object(o.a)(s,2),u=l[0],m=l[1],p=Object(n.useState)(""),d=Object(o.a)(p,2),g=d[0],f=d[1];console.log(i),console.log(u,"print"),Object(n.useEffect)((function(){v.getData().orderBy("timestamp","desc").onSnapshot((function(e){console.log(e,"snap"),m(e.docs.map((function(e){return{id:e.id,message:e.data()}})))}))}),[]),Object(n.useEffect)((function(){var e=v.getCurrentUserName();console.log(v.getCurrentUserName()),f(e)}),[]);return r.a.createElement("div",{className:"chattingWrapper"},r.a.createElement("h2",null,g),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v.getData().add({message:i,userName:g,timestamp:W.a.firestore.FieldValue.serverTimestamp()}),c("")},className:"messageInput"},r.a.createElement(j.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(O.a,{htmlFor:"input"},"Type message"),r.a.createElement(N.a,{value:i,variant:"outlined",onChange:function(e){return c(e.target.value)}})),r.a.createElement(E.a,{variant:"contained",color:"primary",endIcon:r.a.createElement(y.a,null,"send"),disabled:!i,type:"submit"},"Send")),r.a.createElement(I.a,null,u.map((function(e){var a=e.id,t=e.message;return r.a.createElement(S,{key:a,userName:g,message:t})}))))},D=t(86),F=t(136),T=t(164),L=t(87);var R=t.n(L)()((function(e){return{main:Object(D.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},submit:{marginTop:3*e.spacing.unit}}}))((function(e){var a=e.classes;return r.a.createElement("main",{className:a.main},r.a.createElement(F.a,{className:a.paper},r.a.createElement(T.a,{className:a.avatar}),r.a.createElement(C.a,{component:"h1",variant:"h5"},"Hello Guest!"),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",component:s.b,to:"/signup",className:a.submit},"Register"),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",component:s.b,to:"/login",className:a.submit},"Login")))})),q=t(160),A=Object(q.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}})),B=Object(l.f)((function(e){A();var a=Object(n.useState)(""),t=Object(o.a)(a,2),i=t[0],c=t[1],l=Object(n.useState)(""),u=Object(o.a)(l,2),d=u[0],g=u[1];return r.a.createElement("div",{className:"login-warpper"},r.a.createElement("form",{className:"login-form",onSubmit:function(e){return e.preventDefault()&&!1}},r.a.createElement(j.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(O.a,{htmlFor:"email"},"Email"),r.a.createElement(N.a,{id:"email",name:"email",value:i,type:"email",autoComplete:"off",onChange:function(e){return c(e.target.value)}})),r.a.createElement(j.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(O.a,{htmlFor:"password"},"password"),r.a.createElement(N.a,{id:"password",value:d,type:"password",autoComplete:"off",onChange:function(e){return g(e.target.value)}})),r.a.createElement("div",{className:"login-button"},r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){return f.apply(this,arguments)}},"Login"),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",component:s.b,to:"/signup",className:"margin-top-10"},"Resister"))));function f(){return(f=Object(p.a)(m.a.mark((function a(){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v.login(i,d);case 3:e.history.replace("/chatting"),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),alert(a.t0.message);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))).apply(this,arguments)}})),P=Object(l.f)((function(e){var a=Object(n.useState)(""),t=Object(o.a)(a,2),i=t[0],c=t[1],l=Object(n.useState)(""),u=Object(o.a)(l,2),d=u[0],g=u[1],f=Object(n.useState)(""),h=Object(o.a)(f,2),b=h[0],y=h[1];return r.a.createElement("div",{className:"login-warpper"},r.a.createElement("form",{className:"login-form",onSubmit:function(e){return e.preventDefault()}},r.a.createElement(j.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(O.a,{htmlFor:"name"},"Name"),r.a.createElement(N.a,{id:"name",value:i,type:"text",autoComplete:"off",onChange:function(e){return c(e.target.value)}})),r.a.createElement(j.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(O.a,{htmlFor:"email"},"Email"),r.a.createElement(N.a,{id:"email",name:"email",value:d,type:"email",autoComplete:"off",onChange:function(e){return g(e.target.value)}})),r.a.createElement(j.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(O.a,{htmlFor:"password"},"password"),r.a.createElement(N.a,{id:"password",value:b,type:"password",autoComplete:"off",onChange:function(e){return y(e.target.value)}})),r.a.createElement("div",{className:"signup-button"},r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){return w.apply(this,arguments)}},"Register"),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",component:s.b,to:"/login",className:"margin-top-10"},"Back To Login"))));function w(){return(w=Object(p.a)(m.a.mark((function a(){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v.register(i,d,b);case 3:e.history.replace("/chatting"),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),alert(a.t0.message);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))).apply(this,arguments)}})),z=t(161);var G=function(){var e=Object(n.useState)(!1),a=Object(o.a)(e,2),t=a[0],i=a[1];return Object(n.useEffect)((function(){v.isInitialized().then((function(e){i(e)}))}),[]),!1!==t?r.a.createElement("div",{className:"App"},r.a.createElement(s.a,{basename:"/Social-Media"},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:R}),r.a.createElement(l.a,{exact:!0,path:"/login",component:B}),r.a.createElement(l.a,{exact:!0,path:"/signup",component:P}),r.a.createElement(l.a,{exact:!0,path:"/chatting",component:U})))):r.a.createElement("div",{id:"loader"},r.a.createElement(z.a,{disableShrink:!0}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root"))},92:function(e,a,t){e.exports=t(135)},97:function(e,a,t){}},[[92,1,2]]]);
//# sourceMappingURL=main.9a231ea1.chunk.js.map